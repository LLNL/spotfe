<html>
<head>
    <title></title>
</head>
<body>

    <main></main>
    <script src="./localforage.js"></script>
    <script src="./main.js"></script>
    <script>
        let [_, path, filename] = window.location.href.match(/durations%20\%20(.*)\/+(.*\.cali)/)
        localforage.getItem(path)
            .then(runSet => {
                const fileData = runSet.Runs[filename]
                for (const [key, val] of Object.entries(runSet.RunGlobalMeta)){
                    fileData.Globals[key] = {value: fileData.Globals[key], type: runSet.RunGlobalMeta[key].type}
                }
                const flags = {data: fileData.Data, meta: fileData.Globals}
                return Elm.Main.init(
                    { node: document.querySelector('main')
                    , flags
                    }
                )
            })
        document.title = filename

    </script>

</body>
</html>