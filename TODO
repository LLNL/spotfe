
DONE - For the icons: Get a BE data to see whether timeseries data is there.
    * spot.py Line 254.  Need to get OGlobals.options which should contain the string "timeseries", just check the latest david's data.
    * jupyter/walltime will always be there.
DONE - Xaxis, GroupBy, Chart name all the same. (things should not have multiple names)
DONE - instead of strcon, use a space.

FIXED - not loading issue -> related to layout not loaded early on.
DONE - strcon to strcat
DONE - attributions to the help repo, move somewhere else.
DONE - start with a default name that makes sense: maybe whatever is in the first drop down.
DONE - Add this to list of things to test: /usr/gapps/spot/datasets/demos/mpi

DONE - update drop down list as soon as they add the graph, instead of making them refresh.
    * should we just do it from index.js 197.
    * need to enable source maps in the transpilation process in order to debug where the funcs came from.
DONE - need to update compare view when deleting as well.
DONE - Error message: (name && dimension) When creating a new composite that has the same name of something that already exists, there needs to be an error
DONE - For add new plot screen, when ScatterPlot is selected, change the select drop down contents to just ints.


- AFter an Edit of a chart name, need to edit the compare view version as well.
BUG - when updating the name of the chart, the table column doesn't update.
- The type should not always be "int" in CompositeLayoutModel:
                        runs[z].meta[title] = {
                            type: "int",
                            value: val
                        }


DONE - On index.js need to call compositeLayoutModel new function to
DONE - take "runs" and format it in a way handle_success (from Callspot) can handle
    * then call that function and fill up ST.cali_obj_by_key
    * then call augment_first_run.
TEST - need to make sure everything is correct
AddChartTypeView.js : 312 -> here we can change the strcon back so the user can see what they've created, if matt changes his mind.


- find out how to clear cache, bust joe's cache how to?
- jupyter icon - make it actually jupyter.



- In the Compare code: error messages for host issues
- Should we change machine default?  since oslic is down?


- Back end is not returning a layout for the following:
https://rzlc.llnl.gov/spot/dcvis/?sf=/usr/gapps/spot/datasets/demos/mpi&xaxis=cluster_region_cost_region_balance_&groupby=cluster&aggregate=sum
    * add regression tests.

Problem:
Not able to update the compare view after setting window.runs

Solution:
    Inside App.vue pug tempalte:
    .updateCompareView(@click="rerenderForSelectDropdownUpdate")

        rerenderForSelectDropdownUpdate() {
            this.filenames.push("test823");
        },

    This tells vue to rerender the compare component because this.filenames have changed.
    runs() is a computed property which takes into account the changes in window.runs


    Another key part is this:
        var update_compare_view_ = function() {

        //  The first run's meta object is used to determine what the drop down select options should be.
        window.runs = ST.CompositeLayoutModel.augment_first_run_to_include_composite_charts(runs);
        $('.updateCompareView').trigger('click');
    };



For Nov 4th
DONE - Stop wrap around from happening for the horizontal bar charts.
DONE - Get a new icon for memory view: it should have to do with time series, maybe a set of line graphs.
DONE - Title: "Iterations", "Memory Bandwidth", "Time", "Power", else use the actual name (it'll be long but hopefully this owon't happen a lot)
    * added dynamic update according to what gets checked or unchecked.
DONE - I also added a custom map where we can easily add more labels.
DONE - add strcat operation instead of relying on +.
    * which means + strings should be an error.
    * make sure it's ready to be released.

"time series" -
- BE calls examples
    * Spot examples for BE calls, Optvis too.
- Compare.js look into, to see if we can use the composite data types.
    * need to be able to pass in the new data.
    * be able to set the X-axis drop down and y-axis?
    * change the data source from what it was using to the data we're passing in.

- Optvis: reach out to adam for repro steps. (adam was demoing when it happened).
    * turns out it's a firefox issue.


In App.vue the select drop down gets created from window.runs
index.js creates the window.runs, we can manipulate the runs from there.


- Later: let's take a look at EtcBucket.

Optvis: 20%, Spot: 80%

For Oct 22:
- DONE - For optvis, there should only be one of each "psi", "psi_data", and they should not be strikethrough


DONE - research possibility to do an Iframe, and pull in the existing code
DONE - Be able to reset saved charts, so bad ones don't linger around.
DONE - work out compare.js stuff.
DONE - Instead of text: First pLot : call it memory bandwidth
DONE - do error dialog on submit, if you do a weird combo

- do chart wrap around.


Building Compare.js
1) - need to work on the compare.js build, seems to be broken when i run it.
    * be able to change 1 thing.

SCSS clean up
2) DONE - SCSS clean up and break up these files so that there's not just 1 big one.
DONE - fix the grunt server so we can compile scss or just find command to do scss.
    * did some SCSS refactoring, so that not all the CSS will be in just one big file.

Memory
3) DONE - when adding a plot, don't rerender all the existing plots, just add one new one. * this causes a bug where everything gets rerendered.
DONE - Error handling if the data is not there yet.    * right now records.length is 0 and then there's no graph there.
DONE - Use actual files that are in the URL, rather than hard coded ones.
DONE - add a test for the new directory we have of David's new data.

Composite Charts
4) DONE (initial implementation) - concat is important -> MOST important
    * provide support for pieChart and horizontal bar chart for string based stuff.


This seems to work for an iframe within a jupyter notebook.
import IPython
url = 'https://lc.llnl.gov/lorenz_base/dev/pascal/dcvis/memory/index.html?runSetId=/usr/gapps/spot/datasets/lulesh_gen/lul_sept_28_timeseries&runId=200924-16383266200.cali'
iframe = '<iframe src=' + url + ' width=700 height=350></iframe>'
#IPython.display.HTML(iframe)
IPython.display.IFrame(url,800,400)


-  Vuetify
- Nox.


Caveat:
- EtcBucket is not implemented for composite dimensions.


Maybe?
- Generate new files using the attribute data.


Memory:

DONE - Use alias in checkbox widget as well.
DONE - show alias instead of the coded attribute name.
DONE - only default on, based on the same units.
    DONE * Use actual David's new file which has data
    DONE * first plot render only show the things that are default checked.
    DONE * add console error message if the data is not present in the file.
DONE - on checkbox only re-render 1 graph, not the whole thing.
    * this will prevent another bug that has to do with zooming/panning/using the plotly stuff.
DONE - Titles and Axis labels
DONE - At the top of the chart, have a drop down which drops checkboxes with text next to it
DONE - allow checking/unchecking which combines all the line graphs on one chart.
DONE - Button to allow for another chart type.
DONE - create multiple instances when button is pressed.  have each check/uncheck belong to that instance.
        * Separate each chart instance and legend and checkbox instance correctly.


Multi:
DONE - get rid of first dropdown.
DONE - populate the select drop down with correct values.
DONE - actually create the submit function which takes all the data and aggregates them according to the formula
DONE * all the operations involved in a new chart type: check/uncheck, edit.
DONE - eval for data
DONE - able to delete a chart.


Things Think about:
- Eval will do order of operations, not top to bottom
- concat operation requires some extra work, because need to do it manually and split up evals.
- need to do const attribute where you enter your own number
- what to do in cases where there's a string, use pieChart?




DONE - fixed hamburger Icon.
DONE - get all the copyrights and put them in a directory
DONE - Tuesday 10am do actual release to cz.  then rz.
DONE - Spinner for MultiJupyter.
DONE - moved multijupyter button to the left a bit.
DONE - Check Libraries:
    - dc.js
    - crossfilter
    - plus any other javascript libraries
    - check with matt to make sure they're okay.
    - worried about images, all the things we're not thinking about.
- David's -> bug about bar charts reset not working in FF try to repro again.

Next Release:
* Links at the bottom of the page, need to be copied to github?
DONE - Update Documentation with saying what buttons are doing.
DONE - made some adjustments to the width and area on the left. See if marty approves.

DONE - LineGraph: Do proof of concept:
    * finish up memory button and showing the index page.
    * button which jumps to new page
    * make a lineChart with fake data and zooming ability.
    * Labels on the axis. (should get them from the file)
    * Unit types "Mb/s"
    * See if it supports being able to click on certain points.

- Composite type: (work on estimate)
    * It's just a computed value based on multiple data attributes.
    * What would be involved in selecting multiple data attributes
    * are we sending this data to compare?  or does compare get it from the BE?
    * composite needs to be viewable in compare.
- solving problem of if you create a new chart type, then how can other people see it
    - Do compression on sqs.layout_used figure out how to compress to less than 1K
    * do URL encode and decode
    * if loading, need to use the decode but don't overwrite their existing
    * is it okay if the user overwrites their own saved charts?

- SCF testing checklist: Check Alternate user, and run setperms.shS
- make spot-dev email list.
    * https://llnl.servicenowservices.com/ess?id=ticket&table=sc_req_item&sys_id=015312ac1b82d050774e657fe54bcb69&view=sp
    * add people using bulk add.
- try to run joe's minification process.
- lineGraph memory
    * person clicks on a button on a cali run line that opens a new page.
    * linegraph chart will appear on a new page.
    * I need to get the stub from joe on this one as the BE comes from him but i will own the BE later
- Get rid of left margin now that we don't support left horiz bar chart anymore
- reduce minimum width, so people with smaller screens don't have problems viewing
- integrate Joe's code with mine.  Right now still working on minified code.
    * need to make this a priority.
- This can get you your zone: nodeattr -v center


operators:
x, /, +, -, concatenate,


Don't have to start with editable.

support: Set, String, Lists, Numbers
let them become strings.

eventually do some math on them.

ignore order of operations, and do top to bottom.


Features for lineGraph:
-zooming
-possibly multi line graphs
- get initial thing from David
- spot.py shows how to maek the call


timeSeries - we want a generic visualization for timeSeries

bandWidth is a type of timeSeries data.

initially the data will be small, data did a lot of aggregation for us.





Next:
DONE - Joe Chavez request for create a repo for the container



- Discuss how long joe will be here?
    * Joe do his code integration.
- Do people want to set up spot-dev email list, add themselves.
    * there is a Bulk add, if I can find it.
- update dev environments and put loader and width adjustment.
- do we still want "machine" to be settable?




Question for next:
Do we want to do scatter plot first?
or do we want to do the Memory lineChart next with horizontal scroller.

https://stackoverflow.com/questions/11574271/git-change-default-umask-when-update-file#25441170


Last few weeks:
- release script, release processes
- coordinating with joe and steph brink (hatchet)
    * for deployment related stuff.
- regression testing
- hover overs for horizontal bar.
- improvements on making things env independent
- integrate multiJupyter/jupyter changes with Joe's new container model.
- EtcBucket
- scatterChart
    * persistance in localStorage
    * adding dynamic new chart types
    * preloading edit modal
    * edit submit for changes to chart types
    * yaxis, xaxis, title editable
    * make charts deletable.
- horizontal bar charts.

Last time:
DONE - make Release script that copies directories (hatchet, caliper) from dev to live
    * first run git fetch, git pull on live dir.
DONE - fixed a command line error for output.
DONE - isntead of come up with hard coded "live" inside of spot.py
    * or try to figure out dev/live based on where it's executing.

/collab/usr/gapps/python/$SYS_TYPE/conda


- martyMCF error
    * 80 MB response!  Wow!
    * error is somewhere in compare.js: graph.getData

Release process:
- TEST: remember to change template notebook in live from dev/hatchet to live/hatchet
- TEST: Alt user to ensure that the permissions are set correct.



DONE - maintain order consistency of the charts
    * right now when you edit a chart, the chart edited can appear in a new position
    * turns out it was being ordered by UserPreferences.js Line 33.
DONE - make sure dates have the year.
DONE - Help David deploy his stuff on dev on CZ and RZ.
    * DONE - actual directory and perms is deployed
    * DONE - modified the templates such that cali_query_path is set correctly and will run fine.
    * DONE - The architecture lookup needs to go directly into the notebook
DONE - Set up an error message to popup if the user only has 1 file selected when clicking multiJupyter
DONE - openJupyter integration with Joe's container.
    * DONE - Off switch for ScatterChart/Edit Chart feature
DONE - Fix Git on my computer: MacPatch messed up my computer really bad.
DONE - edit functionality on FE
    * DONE - load correct select dropdown.
    * DONE - ensure that x-label and y-label are affected when changing them on scatterPlots
    * DONE - show/hide delete button based on chart type
DONE - delete functionality on FE
DONE - Create new localStorage persistance layer
DONE - Integrate new persistance layer into existing functionality.
DONE - Do delete persistance
DONE - Do edit name of chart
DONE - Add Chart make it use the new pers layer
DONE - Auto focus for the initial input field.
DONE - check to see if we can do hovers for the horizontal bar value


FIXED - stephanie brinks cali file error:
    * joe fixed the back end where the layout wasn't being returned
FIXED - multiJupyter integrating for Joe's container.
    9 seconds - 8807 characters.
    38 seconds - 36000 characters.
    57 seconds - 52000 characters


For New Release:
- new version of caliper
- joe's flamegraph
- David's x86 platform feature.
- Turn off hamburgers, + plus scatter. (in dev for now). -> send email
- make sure to save everything based on the spot file (sf)
    * part of new localStorage integration.
- new localstorage implementation for show/hide of checkboxes.



Next:
- encode a URL string, everytime someone adds or edits or deletes a chart
    - append hash to URL
    - on page load, read URL hash and use it to set up localStorage sqs.
- SPOT visualization for memory, some kind of line graph.
    * will reuse for other time series data.
    * need support for x100 or more.
    * memory bandwidth, energy { both are per node, data comes in per node. }
    * they might want to see 1 node or all nodes.
    * if they select all we could do an aggregation: max, min, average to show one line
    * David will give me a Cali Query call which i can call python.( a new spot.py call)
    * this data won't be present in every cali file.
    * this will be a third button that only appears if the data is in it.
    * will need zoom ability -> find this one in the dc.js charts.


Line 325 -> instead of getting from DOM get it from ST.layout_used
    * where is this code.


- Next: Create a deployment script for deploying to live, that includes caliper/hatchet
- Configuration popup for changing things like x-axis and yaxis
    "UNIQUE_STR": 200, ->could be configurable for the popup.
    "MAX_HOR_BAR_CHART_STR_LEN": 100 -> could be configurable for the popup.
- Joe: URL for Jupyter needs to change?
- Deal with issue sys.path.append(....)  how to get directory string without duplicating the function?
- Create a deployment script for hatchet and code deployment to maximize robustness.
- CmdLine - Set feature.
    * We'll have to discuss how we break the command line into several parts.
    * set feature for things like: hostlist, cmdline
    * hidden fields.


- Feature request for accessing




DONE - spot.py and Templates/Template*.py are all pointing at live/templates and live/hatchet
    * not spot.py is a symbolic link to live/spot.py, for now.
DONE - make "dev", or "live" specified in spot.py instead of hard coding it.
    * it should figure out where it is and set CONFIG vars appropriately.

DONE - Fix git problems on RZ/CZ, check in spot.py changes
    * ask steph to rm hatchet in dev/hatchet
    * then recheckout /usr/gapps/spot/dev and recheckout hatchet
    * do the same on CZ.
- Etc Bucket, don't put it in the Table - feature.
    * DONE - Replace with just: "Etc Bucket" and then post load the real values.
    * DONE - Create cache (or find the one we have) of cali objects indexed to key
    * DONE - Create dimension_index of layout_used.table and get methods.
    * DONE - Iterate through all cali_obj_by_key_ and check for "Etc Bucket", for each extract key and row_index,
    * DONE - Use row_index to find out the dimension from dimension_index
    * DONE - look up correct Value: ST.CallSpot.get_cali_obj_att( key: 89, dimension: "cputime")
    * DONE - Replace Etc Bucket with the correct value, above. $('[key=" + key + "]').parent().parent().find("_" + row_index).html( val )
    * DONE - make the above happen inside a setInterval call, so it doesn't lock up the browser.
    * DONE - Run it after intial load: ST.EtcBucket.handle_etc_buckets()
    * DONE - Rerun it, after sorting up/down arrow
    * DONE - Rerun it after any kind of selection occurs
DONE - Send matt the Venv location and commands: Don't need to because we're using lora.cgi to run the persistance layer




"# Add hatchet to PYTHONPATH\n",
    "sys.path.append('/usr/gapps/spot/dev/hatchet')\n",
    "import hatchet as ht"

Workflow:
Checkperms
SetPerms

check if it's working:
ht.__version__

  * FIRST: Fix the damn count is wrong bug, where counts are messed up.
        * this was fixed somehow by itself???  weird how it's now working for no reason.

DONE - RZ Venv permissions or group were changed.
    * I need to create a new RZ Venv and start using that.
    * Previous one not working: /usr/gapps/wf/web/spot/virtenv/bin/python
- After stephanie sets the permission of the /usr/gapps/spot/templates/* to 644
the padebug user in firefox should be able to do the following with MJ/J
https://rzlc.llnl.gov/spot2/?sf=/g/g0/padebug/datasets/lulesh_gen/100&machine=rzslic


Recently done:
- mostly helping to fix issues brought up by Ardra.
- Rendering speed:
    * added feature for Etc Bucket - due to 1800 left horizontal bars of 300+ characters.
    * checkbox/uncheckbox optimization.
- Fixed sorting issue where it only sorted the first 50
    * needs to show all the results, not just the first 50.  before couldn't do because checkbox optimiztion
- soring for timeval in the table make sure that's using number, not sorting as string
- RZ Venv permissions changed preventing non-spot from working for jupyter
    * so created pointed RZ venv to our own venv.

- Starting tomorrow we'll be able to test non-wci accounts in RZ Dev, makes testing much easier


For PADebug: this does not work anymore because the python venv permissions I guess were changed.
drwxrwx--- 10 workflow wciuser  4096 May  9  2019 spot

[padebug@rzslic9:~]$
/usr/gapps/wf/web/spot/virtenv/bin/python /usr/gapps/spot/spot.py multi_jupyter /g/g0/padebug/datasets/lulesh_gen/100 "65.cali 98.cali 97.cali 96.cali 95.cali 94.cali 93.cali 92.cali 91.cali 90.cali 89.cali 88.cali 87.cali 86.cali 85.cali 84.cali 83.cali 82.cali 81.cali 80.cali 79.cali 78.cali 77.cali 76.cali 75.cali 74.cali 73.cali 72.cali 71.cali 70.cali 69.cali 68.cali 67.cali 66.cali 99.cali 64.cali 63.cali 62.cali 61.cali 60.cali 59.cali 58.cali 57.cali 56.cali 55.cali 54.cali 53.cali 52.cali 51.cali 50.cali 49.cali 48.cali 47.cali 46.cali 45.cali 44.cali 43.cali 42.cali 41.cali 40.cali 39.cali 38.cali 37.cali 36.cali 35.cali 34.cali 0.cali 32.cali 31.cali 30.cali 29.cali 28.cali 27.cali 26.cali 25.cali 24.cali 23.cali 22.cali 21.cali 20.cali 19.cali 18.cali 17.cali 16.cali 15.cali 14.cali 13.cali 12.cali 11.cali 10.cali 9.cali 8.cali 7.cali 6.cali 5.cali 4.cali 3.cali 2.cali 1.cali 33.cali"




- Wall Durations
DONE - Investigate the sorting issue some more
- Look into getting the actual MJ to run, in the jupyter notebook.  Still some issues on the 3rd box down.


DONE - load_compare optimization to optimize checkboxing speed: etc bucket feature.
    * ChartCollection.js - Line 220 - let's see if we don't need to run load_compare after the first time from here?
DONE - prevent cmdLine or any other attribute from having more than 100 unique values or so.
DONE - Do error message for MJ based on the length of URL string.
- hatchet -> once steph updates the dev/hatch and dev/templates, get it hooked up to that location.
    * make sure those things can run through the whole program


- For Sorting issue - Dc.js - is there a way to give it ALL the data,
but only load some of it visually, to speed up the loading speed?
Problem is it's only sorting the first 100 or so, but all need to be sorted
if we load all of it then it'll load too slow.


- target 2.2 release
    * live/spot.py fix.
    * Delete button

- Pop up dialog for a chart: Edit stuff
    * export to vector graphics to be downloaded (kenny's request), for a slideshow.
        * perhaps there is a nifty js package that can do this? E.g. export a div as an svg?
    * possibly Delete button is here
    * ability to change name
    * ability to change X axis or y axis
        - research this.
    * future configurations
    * ranges on the axis.

Previously Debugging:
- Fix MJ error, seems to come and go.
    * ST.str_cali_keys is wrong.  it should be like this: "65.cali 98.cali 97.cali 96.cali 95.cali 94.cali 93.cali 92.cali
    * defaultKey: file path=/g/g0/pascal/test2/ardra.spot.smoke/8140.144792561766

[Lorenz::REST::Command::runApprovedCommand] Failed to run command: '/usr/gapps/spot/venv_python/bin/python3 /usr/gapps/spot/spot.py jupyter /g/g0/padebug/datasets/lulesh_gen/100/19.cali' on oslic: cali-query: Error: Could not read file /g/g0/padebug/datasets/lulesh_gen/100/19.cali Traceback (most recent call last): File "/usr/gapps/spot/spot.py", line 361, in <module> args.func(args) File "/usr/gapps/spot/spot.py", line 100, in jupyter metric_name = defaultKey(str(cali_path)) File "/usr/gapps/spot/spot.py", line 22, in defaultKey key = (list(records[0].keys())[0])
IndexError: list index out of range
    * this error above was because we were sending the wrong cali file strings in the argument list (i think)



Next:
DONE - David's Paper - read it and mention if anything is unclear.
DONE - select drop downs should update chart type name.
DONE - Selecting nothing will put things in a weird state.
DONE - launchDate * dates on x-axis need to show as dates.
DONE - unchecking things causes problems -> not reflecting correctly on FE
DONE - Prevent the user from adding a chart that they already have
DONE - move x-axis label down if it's a date type.
DONE - persistance integration complete.
DONE - y-axis be able to show very long numbers as abbreviated.
DONE - figure of merit on y-axis Fix: it's not showing the entire width.
DONE - launchDate on y-axis need to show as dates.
DONE - documentation and learnings on Permissions and deployment issues.



- Should we have a delete new checkbox scatterChart type?
- Modify link page to include padebug directories and machines.
- Deploy: /usr/gapps/spot/live/spot.py (verify in code this new /live/spot.py is there)
    * can we deprecate the old /usr/gapps/spot/spot.py ?
- if Strings are easy to do, look into doing.
- Error messaging:



DONE - Do reset link for ScatterChart.
DONE - use yrange calcualted, so as to add +1 to top and -1 to bottom.
DONE - x axis and yaxis labels.
DONE - set up links to cz dev environment.
DONE - the checkbox text in Preferences, making sure it shows up.
DONE - Fixed the chart not showing up (Benjamin Corbette's bug), where some charts not showing up: "numThreads min"
    * https://lc.llnl.gov/lorenz_base/dev/pascal/dcvis/?sf=/g/g0/pascal/time
DONE - Fix https://lc.llnl.gov/lorenz_base/dev/pascal/dcvis/?sf=/g/g0/pascal/time (adiak and spot).
    * Why are these two charts doubled up on each other? high water mark mean / high water mark min.
    * does it have anything to do with dimension, instance_num refactor?c
DONE - Integrate with Joe's URL persistance for chart checked/unchecked.
TEST - URL bar persistance and all ScatterChart capabilities


DONE - update spotfe repo.
DONE - update spotbe repo

* make sym link from spot.py to the live/spot.py
    * make our app point to dev/spot.py OR live/spot.py and Test!
- git submodules: Caliper and Hatchet. (there are repos but not submodueles, yet)
    * Caliper build script will generate caliper-install
- make two directories: dev, live underneath /usr/gapps/spot
    * put spot.py in a lower area, folder.
    * do it in RZ as well.
- change neame of hatchet-v1.0 to hatchet and fix any broken links
- venv script for generating the virtual environment.
- datasets should not be part of the Repo. - keep it at /usr/gapps/spot and make it it's own repo?
- The BE repo itself will just be spot.py spotdb*.py and templates (used for jupyter stuff).




Monday:
- deploy latest changes (but hide plus button)
- remove hatchet-v1.0.0 (put somewhere else, backup area)
- move spot.py one down and create symbolic link







DONE: Need to make a selection first bug.  without the selection, "Undefined" gets sent to the BE.
DONE - Hover over tet to say: "Open all file for jupyter" on the MJ button.
DONE - Hover over buttons for Jupyter and Clock.
DONE - some hatchet modifications to the jupyter file: dictionary of cali files/durations.
- then do lots of testing to make sure everything works. (keep in mind MJ limit of about 300 or so due to request size limit.).

DONE - Make button for multi jupyter request and /usr/tce/bin/python3 /usr/gapps/spot/spot.py multi_jupyter /usr/gapps/spot/datasets/lulesh_gen/1000/333.cali
    * on dev_spot.py create def multi_jupyter to allow for multipole jupyter files.
    * send all cali files selected in multiJupyter() function.
    * replace MULTI_CALI_FILES with new format.

DONE - steph talk to about not having errors in the Hatchet page..
DONE - why did checkboxes break?  spot.py error.
DONE - MJ make it an icon.
DONE - add a dialog popup if they select more than 300 or so.
DONE - get rid of console logging too much.
DONE - David Boehma's dataset is causing some issue for one of the piecharts not showing up.
DONE - Can you update the SPOT code to test for SCF, and use cslic if we’re running there?


DONE - Create tests for Subfolder testing. this is "a key part of their workflow"
DONE - linke from our test suite page.
DONE - Fix Subfolder issue ( i think this is for the BE to fix ).
DONE - Force Environment.js to be there * provide error message if there is no Environemnt.js there.
DONE - Use machine designation instead of environment designation (each environment can define it's own machine)
DONE - Figure out Git Ignore, why is it no ignoring Environment.js
- Start testing multi subfolder.



For subfolders: 37 seconds for 15k.

- investigate "vue.js:597 [Vue warn]: Cannot find element: bottom-tabs"



- merge joes code into my own, not in minified form?
- test.html - add matt's new directory.  He wanted me to add a directory to the test page.



may still need to do this:
cali_file = CALI_FILES[0]["cali_file"]
cali_file2 = CALI_FILES[1]["cali_file"]

Next:
DONE - Fix link to Documentation
2. Integrate with Joe Chavez.
    DONE - On page load make sure that whatever default tab is open is shown and the other one is fully hidden.
    DONE - Propate URL changes to drop downs in the compare page on page load.
DONE - redeploy to cz and rz and Test it.

2. Spot Scalability - to 1 million.
    * I need the AJAX request to not timeout -> which means, getting the request time down to about 5 seconds or less.

3. Update the optvis deployment

4. Optvis -> use the script that Matt provides: a c++ program executable that i will run that will generate a file that i should delete after reading
    * command_out -> will contain the output of the command of this program.
    * the input files, I'll get them from a different source, probably embedded in the JSON.

5. go back to jira list and check what can be forward progress -> like sets on dc page.

5- Possibly Unknown Priority number - Later on Scalability of Optviz.
    * make sure to pass Matt a UserID
    * make sure to tell him when session has closed, or assume it's closed 5 min after no action.
    * send session start to matt.
1. FIXED - Support Undefined values (some cali's have them defined, some don't)
    * "not defined", 0 if Int.
    * make some test files to test it.


List:
DONE - Fix stephanies immediate problem with regards to being able to update the template file
DONE - Fix Nathan's issue about not being able to send the command.
    * worked with Joe to integrate new command propogation.
DONE - Boehma is able to reproduce the issue about the select drop down height.  Let's fix that.
DONE - make spot_dev.py for dev and spot.py for live.
DONE - Fixed Nathan's customers problem about the strange key names with (2,4): in it.
DONE - Reset link needs to not appear after reset_all was clicked. (horizontal barcharts)
DONE - Rebind "show more" after any selective event occurs -> like you select a pie chart or a bar chart or something.
DONE - Show more optimization -> make it so it doesnt makea  summary call, just use the data we have.
DONE - finished training: https://caas.llnl.gov/mycaas
DONE - 9. Create a testing index.html page. * Make all tests RZ.   * email Nathan to get spot.py URL for them.
DONE - get SCF accounts -> Jeff -> deploy spot there.
    * md5 sum to see if it pushed correctly.
    * through FIS (file interchange service) into SCF
    * DONE Get SCF account then do this: https://lc.llnl.gov/confluence/display/RAM/FIS
    * DONE access to machines + Livit meeting for SCF access.
DONE - be able to remove existing files.
DONE - 0. Licensing for icons, check.
DONE - 4. Fix wrap fo the horizBarChart
DONE - 5. Be able to owverwrite exiting cali files.
DONE - 6. (one working case is there) Fix compare page for cali files -> make sure tmepalte is not included.
DONE - 7. More template paramters.
DONE - 8. Add a curve, so it's not homogenous for bar Chart
DONE - add curve to horiz bar chart and pie chart.
10. Integrate with Joe Chavez.
9. Fix [brackets] for command line, it's not showing up. (make sure it's not a problem in dc.js)
- Fix horizontal brackets lining up with the actual bar charts.
- Test Data the Jupyter notebooks don't seem to work.

- Help fix Stephanie's problem:
    /usr/gapps/spot: vi /usr/gapps/spot/templates/TemplateNotebook.ipynb
    I will modify this sys.path.append('/usr/gapps/spot/hatchet')\n do be her new directory.

https://lc.llnl.gov/spot/dcvis/?sf=/usr/gapps/spot/datasets/lulesh_gen/100


Rooms: 2063, 2065, 3117, 3150, 3152, 3154

The easiest way to use FIS:
On RZ, use the ts alias I created.

On an RZ system:
tar up your data into a tar file.

On RZ system:
scp myfile.tar rzfis:TO/myfile.tar (use your LC username and RZ OTP / RZ Token)

Wait ~10 min
On SCF system:
ssh pascal@cslic
sftp pascal@fis
use LC username and SCF OTP.
Best way to get 10 melons for 10$.

cd FROM
get myfile.tar
rm myfile.tar
quit

/usr/gapps/spot

FIS
https://lc.llnl.gov/confluence/display/RAM/FIS
https://myconfluence.llnl.gov/display/RAM/ClassifiedLCAccess

Do I need to use "AdditionalMachineAccess":
https://myconfluence.llnl.gov/display/RAM/AdditionalMachineAccess

How to get a FIS account:
https://myconfluence.llnl.gov/display/RAM/FIS#FIS-DoIhaveaFISaccount?



32000 entires takes 46s to load.
14500 entries take 24 seconds to load, slight delay when checkboxing.
10000 entries take 16 seconds to load
2000 entries take 3.85 seconds to load
95000 got a gtaeway time-out probably because it took too long.


- make deployment group owned by spotdev
    * group should be rwx
    * world should be r x
    * chmod -R g+rwX,o+rX the-base-dir
    * chgrp -R spotdev

How to use:
cd /usr/global/web-pages/lc/www/spot/dcvis/generate/
python3 MakeCali.py 4905

https://lc.llnl.gov/spot/dcvis/index.html?sf=/g/g0/pascal/lulesh_gen/15

next:
DONE - alphabetize the the checkboxes, so you dont have to hunt.
DONE - Added Labels: Groupby and Label xAxis for the select drop downs.
BINS - I made some progress on bar chart bins -> this means you don't need to see those super skinny bars where the width is just 1 point on the x-axis on a 1000 point xrange graph
    * It works like this: If the X-range is more than 30 it will sub-divide into 20 bins
    * note: there's still 2 minor bugs with this: the leftmost bucket doesn't always show up and the right most bucket only shows 1/2 of it sometimes, hence why the iterations chart looks blank.
    * Sub-Integer charts still work like they did before
DONE - Added commas to really large numbers.
DONE - made x-axis 45 degrees vertical
DONE - for X-axis: match date to duration format of the other spot page.  (multi-line, OR vertically)
DONE - put the correct format of date in table - not the unix epoch time.
DONE - spot2 redirect or deploy there and level it up 1 step from web/
    * https://lc.llnl.gov/spot2/?sf=/usr/gapps/spot/datasets/lulesh_new
    * https://rzlc.llnl.gov/spot2/?sf=/g/g0/pascal/testresults


RECENTLY DONE:
DONE - alphabetize the drop down.
DONE - Table HTML -> for the pieCharts and barCharts - maintain left/right position.
DONE - dynamic table row show/hide fix.
DONE - Added Dev and Prod URLs to documentation url list, to make it easier to remember the URLs.
DONE - if sf file is not there then spit out an error.
DONE - for now an input box.  "Please provide a directory that contains dot cali files."
DONE - Naming of Barchat => dimension ("Iteration")
DONE - xTics astethetics, don't show 1.2,1.4 in the 1,2,3 data
DONE - Fixed LeftMost BIN does not show up.
DONE - Fixed RightMost BIN is cut in half for some reason.
DONE - Apply xUnits to sub-integer charts.  This means you can now select ranges on sub-integers.
    * this should fix the not being able to save bucketed charts.
DONE - bug fixed: filter brush selection is limited to integers instead of allowing anywhere.
DONE - If you mis-type a path from the rzlc.llnl.gov/spot2 dialog, it takes you to rzlc.llnl.gov.  It should instead just print an error.
DONE - Need to have multiple requests to send all the cali files.

------------------------------------------------------
DONE - Optimize the FE loading of charts to prevent long loading times
DONE - prevent alert, and show in screen, if no user actions yet, don't say "got 0 data points."
    * key: if no user actions yet.
DONE - fix case where you only have 1 cali file.


https://lc.llnl.gov/spot/dcvis/?sf=/usr/gapps/spot/datasets/lulesh_new
https://rzlc.llnl.gov/spot/dcvis/?sf=/g/g0/pascal/testresults0&xaxis=ccompiler&groupby=codename
https://rzlc.llnl.gov/spot2/?sf=/g/g0/pascal/test_results/1/test_results
https://rzlc.llnl.gov/spot2/?sf=/g/g0/pascal/test_results1500

Works:
https://rzlc.llnl.gov/spot2/?machine=rzgenie&calis=local&sf=/g/g0/pascal/test_results1500&xaxis=&groupby=&exe_compare=1

/usr/gapps/spot/spottempw key chunk# data
- attempt to throw as many as possible.

Next:
DONE - turn off the 100 limit
DONE - Update -> URL parameters.- On the compare page, be able to change the dropdowns URLs based on the select drop down change.
DONE - Regression test the last N Days
DONE - TEST and roll out S2.

DONE - Need to support multiple selections for URL loading (also need to encode all those special characters in cmdline variable)
DONE - add URL loading and saving


- physicsstr and "test" - STrings plus more than 8 unique values then we need to have a left horizontal bar in place of the pieChart.  make it scroll.
    * allow for scrolling if too much (right now it scrolls the whole way, but it would look better if it scrolled only the main chart interior part)
    * test for 100s or 1000s of values.
    * test multiple horizontal scrollbar graphs.
- make color based on a hash of the graph name.
- Make sure Spot page supports 10K.
    * Paging of the Table, can we do just top 100, 200, etc.
        * or does it need actual paginated tabs?
    * Joe: Working on pageing of the table.
    Joe is owrking on showing the compare on the actual spot2 page where the table is now.
- Icons - actual icons
- File Upload browser on landing Page.
- Curves & Sets - figure out how to show this in crossfilter (sets is one of the things)
- work on Joe Chavez being able to roll out: S2.


- Nulls
    * assuming we create a newbar with a lower bar, we'll have a problem:
    * if someone gets new data, "what is considered a null" will change.
    * if we make the lowest bucket (null bucket) min int, we won't have to worry about going up to the URL bar.
- it'd be nice if the tics would line up with the bar charts.
- think about 10,11,12 xrange if you only have 11s, think about 1 value graphs and how to make it obvious to user of what it is.
- spin notification



__rec=node,id=108,attr=107,data=79.885979,parent=93
__rec=node,id=127,attr=126,data=5491.526855,parent=108




https://stackoverflow.com/questions/15191258/properly-display-bin-width-in-barchart-using-dc-js-and-crossfilter-js

Things to watch out for:
- is duration key quoted
- are you signed in with a user that is WCIuser group.


TODO/ Feature Requests:
DONE: 00. One color - http://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3
DONE: Firefox Fix.
DONE 2. Sub integer support
DONE 0. That last X-axis ranges make sure it's not 5.3 when it's seperated by 1 tick
DONE 3. Reset All link should reset all URL parameters.
- Think about container graphs and Preferences to X-out a Graph.
- Document whether it uses buckets OR standard.
2. be able to accept very small differences in data values, like: 2.702 to 2.705, etc.
    * Generate some super small data sets on the FE, can that be done easily?
    * Add one chart to the layouts and one on the Data array-> just add one more attribute in the range of 2.7465 and 2.7459
1. Y-axis Ranges should be selected better.
-  Need to fix: Uncaught RangeError: Maximum call stack size exceeded    crossfilter.js: 1353.
5. Do study on if we can have a range selector on a bucketed chart.
8. What about a date selector dropdown?  X number of days.  Instead of last_days=XXX
5. On the Spot1 page, be able to change the xAxis and GroupBy URLs based on the select drop down change.
6. Get a Real date and show it as some kind of selectable chart or at least a drop down.
3. Store layout Preferences: which are changes for example: being able to not show certain charts.
    -> Preferences which allow you to kill things in the Table.
4. Instead of BarChartX, need to go by dimension name so that it doesn't break whenever the user adds a new data attribute
8. Deal with maximum call stack size exceeded error.
9. LAST: Ravel calculation of Lateness is inverted.




Caveat:
- Must remain in the same browser in order to pull up results because we store cali files in localStorage
    * storage in URL is not an option if we have too many cali files.
    * Eventually we'll want to store that on the BE, come up with an architecture for that.





- DONE Announce last_x_day feature, plus the exe_compare=1 feature.
- DONE X range -> take the distance from Min to Max (1% or 3%) of the distance (from Min to max) and add to the max xrange
- DONE Table Sorting bug, fix this. -> this is because the first letter is capitalized, so when it goes to sort, it doesn't recognize the string.
    * prevent dc.js auto capitalize?

- DONE 1. Get Date Data and make sure it shows up in spot2 and spot1
- DONE 2. Drop downs for xAxis and GroupBy
- DONE 3. Send XAxis and GroupBy to spot1
- DONE 4. Receive XAxis and GroupBy on spot1
- DONE 5. on spot1 use those 2 to populate the page.

- DONE 6. when dropdowns are selected, update the URL
    ST.UrlStateManager.update_url('xaxis', )
    * this needs more testing.

- DONE 7. when URL has xaxis and groupby propogate them to the select drop down.
- DONE 8. on spot2 page make sure to add "exe_compare=1" to URL, plus add xaxis and groupby as well.


9. - Add all BarChartX and PieChartX to compareURL.

- Fix firefox/safari browser problem: regUlral expression.

- Work with chavez to get the spot1 page up and running again.

- Retest last_days=XX

10. - Deal with maximum call stack size exceeded error.

11. Be able to graph X-axis of less than 1 int width.
    * as part of this need to be able to subdivide the bars into widths of 0.1 or 0.2, etc.

12. On the Spot1 page, be able to change the xAxis and GroupBy URLs based on the select drop down change.




- Get Date data from boehme and use that.
- Some way to generically specify the "date" field for last_days
- When they click compare, send "hey, I want X-axis to be VAR"  VAR Should be some field the user selects.
    * Initially let's specify it on the URL parameters, later we let them select dropdown it.
- Consider some kind of Calendar or Date selector chart that would be able to select dates, rather than just the URL parameter.
- exe_compare=1 find a way to add this to bookmark.
    * make some kind of bookmark button.

- Joy Kiton - (David Boehme) 13th, 14th (Figure out what is 17th -> 21st).


Think about: Time Series / Line Graphs
    * estimate on this.
    * Max pressure over time.
    * maybe 12 line graphs per graph.


- DONE: Labels for X and Y axis
- DONE for figure of Merit try to round down.
- DONE replace "willEmailYou ToComplain" with "pascal", filler0 (matt) and filler1 (david)
- DONE 1e7, 1e8 abbreviations for Num of Iterations.

DONE since last time.
- DONE Fixed Title for graph
- DONE y ticks, x ticks - you can roughly specify the number of ticks you want
- DONEish buckets.  Needs more testing and shake down.
- DONE Arrows to the left of each of the Table headers.
- DONE - fixed table sorting bug for strings that should be numbers (did some type coercion on data in ajax return handler)
- DONE - fixed table not showing all values bug: was due to maximum was set to 250 even though there were 5000 values.
    * Chart Collection Line 264.  It still showed up in the bar charts but not the table.  Once max was increased to proper value, then all values show up even after being sorted.
- DONE - sort_as_number feature.


Figured out:
Debugged David boehme's issue:
http://localhost:8888/web/?sf=/g/g0/pascal/spot_lulesh_dataset/lulesh_data&layout=/g/g0/pascal/spot_lulesh_dataset/layout.json
    * It would appear that somehow the X-scale is not being set correctly for some reason.
    * This was due to the fact that the data was "90","120" so it tried to treat it as a string, which caused it to find out the max and minimum incorrectly.

- Another Issue: When sorting Problem size ("90","120"), etc the sorting is incorrect because it sorts it as a string, not a number.


RECENTLY DONE:
- Updated some documentation
- Send Tammy the Documentation.
- Refactor ajax interface to allow for more parameters, in preparation for command option
- Allow them to specify command dynamically in URL.
- Get Optviz working:
    * Cloned OptViz repo onto LC, and set up permissions script
    * created new index.html file
    * hacked some of the JS links
    * figured out the right input files to use.
    * and got it operational with some hacking: https://lc.llnl.gov/lorenz_base/dev/pascal/optvis/templates/
- DONE: Got MPI working on CZ.


lulesh_x27_ravel.js   lulesh_x27_ravel.json lulesh_x8_ravel.js
aschwanden1@doc ~/Downloads: pwd
/Users/aschwanden1/Downloads
aschwanden1@doc ~/Downloads:


Show all Hosts:
https://lc.llnl.gov/lorenz/lora/lora.cgi/user/ME/hosts



----------------------------
HSTS error:
if you write in browser "this is safe" then it will let you get past the HSTS error.



How to use CFG:
https://lc.llnl.gov/lorenz_base/dev/pascal/optvis/templates/
Input source file: lulesh.css
Input dot file: lulesh.o.dot
Input json analysis file: lulesh.o.json



https://rzlc.llnl.gov/spot/dcvis/web/?sf=/usr/gapps/spot/datasets/jit_data&layout=/usr/gapps/spot/datasets/jit.json
https://lc.llnl.gov/spot/dcvis/web/?sf=/usr/global/web-pages/lc/www/spot/lulesh2small&machine=oslic&command=/usr/tce/bin/python3%20/usr/global/web-pages/lc/www/spot/spot.py&get_rundata_url=https://lc.llnl.gov/lorenz/lora/lora.cgi/command/oslic

//  https://lc.llnl.gov/spot/dcvis/web/?&machine=oslic&command=/usr/tce/bin/python3%20/g/g90/boehme3/experiments/ubiquitous_analysis/spot.py&get_rundata_url=https://lc.llnl.gov/lorenz/lora/lora.cgi/command/oslic&sf=/g/g90/boehme3/experiments/ubiquitous_analysis/lulesh_data&layout=/g/g90/boehme3/experiments/ubiquitous_analysis/layout.json


Adiak - metadata and extendable data format for Runs.  purpose of this is to standardize
data output, so that they all print to the same format.

Problem: too many physists use different
data storage formats.



